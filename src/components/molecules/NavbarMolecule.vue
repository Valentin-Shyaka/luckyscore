<script lang="ts" setup>
  import { ILink, SupabaseAuthUser } from "~/types/global";

  interface Props {
    links: ILink[];
    rounded?: boolean;
    user?: SupabaseAuthUser;
  }
  const props = withDefaults(defineProps<Props>(), {
    rounded: false,
    user: undefined,
  });
</script>

<template>
  <div
    class="nav flex px-20 justify-between items-center bg-white"
    :class="`${rounded ? 'rounded-full h-16 mt-8' : 'h-20'}`"
  >
    <div class="logo">
      <svg
        width="115"
        height="32"
        viewBox="0 0 115 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect x="48" width="67" height="32" rx="4" fill="#502274" />
        <path
          d="M82 13.3333L84.536 15.176L82 13.3333ZM82 13.3333L79.464 15.176L82 13.3333ZM82 13.3333V11.3333V13.3333ZM84.536 15.176L83.5673 18.1573L84.536 15.176ZM84.536 15.176L86.3333 14.3333L84.536 15.176ZM83.5673 18.1573H80.4333H83.5673ZM83.568 18.1573L84.6666 19.6667L83.568 18.1573ZM80.4326 18.1573L79.464 15.176L80.4326 18.1573ZM80.4326 18.1573L79.3333 19.6667L80.4326 18.1573ZM79.464 15.176L77.6666 14.3333L79.464 15.176ZM77.6666 14.3333L75.3666 16.6667L77.6666 14.3333ZM77.6666 14.3333L77 11.59L77.6666 14.3333ZM86.3333 14.3333L88.6333 16.6667L86.3333 14.3333ZM86.3333 14.3333L87 11.59L86.3333 14.3333ZM82 11.3333L79.7493 9.72268L82 11.3333ZM82 11.3333L84.2506 9.72268L82 11.3333ZM79.3333 19.6667L76.2253 19.3333L79.3333 19.6667ZM79.3333 19.6667L81 22.592L79.3333 19.6667ZM84.6666 19.6667L87.7746 19.3333L84.6666 19.6667ZM84.6666 19.6667L83 22.592L84.6666 19.6667ZM88.6666 16C88.6666 19.682 85.682 22.6667 82 22.6667C78.318 22.6667 75.3333 19.682 75.3333 16C75.3333 12.318 78.318 9.33334 82 9.33334C85.682 9.33334 88.6666 12.318 88.6666 16Z"
          stroke="white"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M1.022 21V11.2H2.534V19.628H7.252V21H1.022ZM12.0591 21.196C11.2845 21.196 10.6171 21.056 10.0571 20.776C9.50647 20.496 9.07714 20.0947 8.76914 19.572C8.47047 19.04 8.32114 18.396 8.32114 17.64V11.2H9.84714V17.682C9.84714 18.3727 10.0385 18.9047 10.4211 19.278C10.8038 19.6513 11.3498 19.838 12.0591 19.838C12.7685 19.838 13.3145 19.6513 13.6971 19.278C14.0798 18.9047 14.2711 18.3727 14.2711 17.682V11.2H15.7831V17.64C15.7831 18.396 15.6338 19.04 15.3351 19.572C15.0365 20.0947 14.6071 20.496 14.0471 20.776C13.4871 21.056 12.8245 21.196 12.0591 21.196ZM21.3964 21.196C20.2017 21.196 19.2544 20.86 18.5544 20.188C17.8544 19.5067 17.5044 18.5267 17.5044 17.248V14.952C17.5044 13.6733 17.8544 12.698 18.5544 12.026C19.2544 11.3447 20.2017 11.004 21.3964 11.004C22.5724 11.004 23.4777 11.3307 24.1124 11.984C24.7564 12.6373 25.0784 13.5287 25.0784 14.658V14.742H23.5804V14.616C23.5804 13.9533 23.3984 13.412 23.0344 12.992C22.6797 12.572 22.1337 12.362 21.3964 12.362C20.6497 12.362 20.0664 12.5907 19.6464 13.048C19.2264 13.496 19.0164 14.1213 19.0164 14.924V17.276C19.0164 18.0693 19.2264 18.6947 19.6464 19.152C20.0664 19.6093 20.6497 19.838 21.3964 19.838C22.1337 19.838 22.6797 19.628 23.0344 19.208C23.3984 18.7787 23.5804 18.2373 23.5804 17.584V17.346H25.0784V17.542C25.0784 18.6713 24.7564 19.5627 24.1124 20.216C23.4777 20.8693 22.5724 21.196 21.3964 21.196ZM26.7525 21V11.2H28.2645V15.274H28.4885L32.1425 11.2H34.1165L29.6925 16.03L34.2705 21H32.2405L28.4885 16.842H28.2645V21H26.7525ZM37.9408 21V17.444L34.5388 11.2H36.2468L38.5988 15.638H38.8088L41.1608 11.2H42.8688L39.4668 17.444V21H37.9408Z"
          fill="black"
        />
        <path
          d="M60.354 21.196C59.6167 21.196 58.9633 21.0653 58.394 20.804C57.8247 20.5427 57.3767 20.16 57.05 19.656C56.7327 19.1427 56.574 18.522 56.574 17.794V17.444H58.072V17.794C58.072 18.4847 58.2773 19.0027 58.688 19.348C59.108 19.6933 59.6633 19.866 60.354 19.866C61.054 19.866 61.5813 19.7213 61.936 19.432C62.2907 19.1333 62.468 18.7507 62.468 18.284C62.468 17.976 62.384 17.724 62.216 17.528C62.048 17.332 61.81 17.178 61.502 17.066C61.194 16.9447 60.8253 16.8327 60.396 16.73L59.878 16.604C59.2527 16.4547 58.7067 16.2727 58.24 16.058C57.7827 15.834 57.428 15.54 57.176 15.176C56.924 14.812 56.798 14.3453 56.798 13.776C56.798 13.1973 56.938 12.7027 57.218 12.292C57.5073 11.8813 57.904 11.564 58.408 11.34C58.912 11.116 59.5047 11.004 60.186 11.004C60.8673 11.004 61.474 11.1207 62.006 11.354C62.5473 11.5873 62.972 11.9327 63.28 12.39C63.588 12.8473 63.742 13.4213 63.742 14.112V14.616H62.244V14.112C62.244 13.692 62.1553 13.3513 61.978 13.09C61.81 12.8287 61.572 12.6373 61.264 12.516C60.956 12.3947 60.5967 12.334 60.186 12.334C59.5887 12.334 59.122 12.46 58.786 12.712C58.4593 12.9547 58.296 13.2953 58.296 13.734C58.296 14.0327 58.366 14.28 58.506 14.476C58.6553 14.6627 58.87 14.8167 59.15 14.938C59.43 15.0593 59.78 15.1667 60.2 15.26L60.718 15.386C61.3527 15.526 61.9127 15.708 62.398 15.932C62.8833 16.1467 63.266 16.4407 63.546 16.814C63.826 17.1873 63.966 17.668 63.966 18.256C63.966 18.844 63.8167 19.3573 63.518 19.796C63.2287 20.2347 62.8133 20.58 62.272 20.832C61.7307 21.0747 61.0913 21.196 60.354 21.196ZM69.1933 21.196C67.9986 21.196 67.0513 20.86 66.3513 20.188C65.6513 19.5067 65.3013 18.5267 65.3013 17.248V14.952C65.3013 13.6733 65.6513 12.698 66.3513 12.026C67.0513 11.3447 67.9986 11.004 69.1933 11.004C70.3693 11.004 71.2746 11.3307 71.9093 11.984C72.5533 12.6373 72.8753 13.5287 72.8753 14.658V14.742H71.3773V14.616C71.3773 13.9533 71.1953 13.412 70.8313 12.992C70.4766 12.572 69.9306 12.362 69.1933 12.362C68.4466 12.362 67.8633 12.5907 67.4433 13.048C67.0233 13.496 66.8133 14.1213 66.8133 14.924V17.276C66.8133 18.0693 67.0233 18.6947 67.4433 19.152C67.8633 19.6093 68.4466 19.838 69.1933 19.838C69.9306 19.838 70.4766 19.628 70.8313 19.208C71.1953 18.7787 71.3773 18.2373 71.3773 17.584V17.346H72.8753V17.542C72.8753 18.6713 72.5533 19.5627 71.9093 20.216C71.2746 20.8693 70.3693 21.196 69.1933 21.196Z"
          fill="white"
        />
        <path
          d="M91.022 21V11.2H95.138C95.7447 11.2 96.2767 11.3073 96.734 11.522C97.2007 11.7273 97.56 12.026 97.812 12.418C98.0733 12.81 98.204 13.2767 98.204 13.818V13.972C98.204 14.588 98.0547 15.0827 97.756 15.456C97.4667 15.82 97.112 16.0767 96.692 16.226V16.45C97.0467 16.4687 97.3313 16.59 97.546 16.814C97.7607 17.0287 97.868 17.3413 97.868 17.752V21H96.342V17.962C96.342 17.71 96.2767 17.5093 96.146 17.36C96.0153 17.2107 95.8053 17.136 95.516 17.136H92.534V21H91.022ZM92.534 15.764H94.97C95.5113 15.764 95.9313 15.6287 96.23 15.358C96.5287 15.078 96.678 14.7 96.678 14.224V14.112C96.678 13.636 96.5287 13.2627 96.23 12.992C95.9407 12.712 95.5207 12.572 94.97 12.572H92.534V15.764ZM99.8677 21V11.2H106.042V12.572H101.38V15.386H105.65V16.758H101.38V19.628H106.112V21H99.8677Z"
          fill="white"
        />
      </svg>
    </div>
    <div class="links">
      <ul class="flex space-x-16 font-medium text-sm">
        <li
          v-for="(link, i) in props.links"
          :key="i"
          :class="`${i < 1 ? 'home' : 'link'}`"
        >
          <router-link :to="link.href"> {{ link.name }} </router-link>
        </li>
      </ul>
    </div>
    <div class="spacing w-2 h-2 block">
      <div v-if="props.user" class="auth-user">
        <p>{{ user?.full_name }}</p>
        <img
          class="w-12 h-12 rounded-full"
          :src="user?.avatar_url"
          :alt="`${user?.full_name} avatar`"
        />
      </div>
    </div>
  </div>
</template>

<style lang="scss" scoped>
  .nav {
    li {
      &:hover {
        @apply text-primary;
      }
    }
    .home {
      .router-link-exact-active {
        @apply text-primary border-b-2 border-primary pb-4;
      }
      .link {
        .router-link-active {
          @apply bg-primary;
        }
      }
    }
  }
</style>
